/* ================================
   ðŸ”§ OUTILS MATH SASS
================================ */

@function clamp-val($v, $min, $max) {
  @if $v < $min { @return $min; }
  @else if $v > $max { @return $max; }
  @else { @return $v; }
}

/* ================================
   ðŸŽ¨ CATEGORISATION COULEUR
================================ */

@function luminance-zone($l) {
  @if $l < 35% { @return "dark"; }
  @else if $l < 70% { @return "mid"; }
  @else { @return "light"; }
}

@function temperature-zone($h) {
  @if ($h >= 30deg and $h <= 110deg) { @return "warm"; }
  @else if ($h >= 200deg and $h <= 300deg) { @return "cold"; }
  @else { @return "temperate"; }
}

/* ================================
   ðŸ”† REPARTITION LUMINEUSE
================================ */

@function light-steps($l-zone) {
  @if $l-zone == "dark" {
    @return (18%, 18%, 18%);
  }
  @else if $l-zone == "mid" {
    @return (30%, 7%, 3%);
  }
  @else { // light
    @return (4%, 7%, 22%);
  }
}

/* ================================
   ðŸŒ¡ï¸ DERIVE THERMIQUE
================================ */

@function temperature-shift($zone, $level) {
  @if $zone == "warm" {
    @return if($level == 1, -6deg, if($level == 2, -10deg, 0deg));
  }
  @else if $zone == "cold" {
    @return if($level == 1, -1deg, if($level == 2, -9deg, -7.5deg));
  }
  @else {
    @return 0deg;
  }
}

/* ================================
   ðŸ§  GENERATEUR DE PALETTE
================================ */

@function generate-palette($base) {

  $h: hue($base);
  $s: saturation($base);
  $l: lightness($base);

  $l-zone: luminance-zone($l);
  $t-zone: temperature-zone($h);

  $steps: light-steps($l-zone);
  $d1: nth($steps, 1);
  $d2: nth($steps, 2);
  $d3: nth($steps, 3);

  // luminances progressives (plafonnÃ©es Ã  96.5%)
  $l1-l: clamp-val($l + $d1, 0%, 96.5%);
  $l2-l: clamp-val($l1-l + $d2, 0%, 96.5%);
  $l3-l: clamp-val($l2-l + $d3, 0%, 96.5%);

  // dÃ©rives thermiques L1 / L2 uniquement
  $h1-shift: temperature-shift($t-zone, 1);
  $h2-shift: temperature-shift($t-zone, 2);
  $h3-shift: temperature-shift($t-zone, 3);

  $base-hsl: hsl($h, $s, $l);
  $l1: hsl($h + $h1-shift, $s, $l1-l);
  $l2: hsl($h + $h2-shift, $s, $l2-l);
  $l3: hsl($h + $h3-shift, $s, $l3-l); // toujours alignÃ©e

  @return (
    base: $base-hsl,
    light1: $l1,
    light2: $l2,
    light3: $l3
  );
}

$colors: (
  bleu-base: #2153F9,
  bleu-base-fonce: #223D99,
  bleu-base-clair: #92AAF8,
  menthe: #A3F9C1,
  bleu-roi: #4B72E9,
  corail: #E85F3C,
  lagon: #19C7D4,
  safran: #F2B84A,
  indigo: #6D3FE0,
  pistache: #91E26B,
  framboise: #D43A7F,
  foret: #2F8A4C,
  citron-vert: #C9E134,
  pervenche: #7A5DF2,
  rose-fluo: #F45B92,
  azur: #3DB1E7,
  miel: #E1A24F,
  tilleul: #5C9A32,
  mauve: #B84FE2,
  jade: #28D6A1,
  mandarine: #F06C21,
  violet-electrique: #9B3FDD,
  menthe-claire: #74E592,
  turquoise: #2AC6B9,
  brique: #C14A32
);

/* gÃ©nÃ©rer les custom properties pour chaque palette */
@each $name, $color in $colors {
  $palette: generate-palette($color);

  .palette--#{$name} {
    --base: #{map-get($palette, base)};
    --l1: #{map-get($palette, light1)};
    --l2: #{map-get($palette, light2)};
    --l3: #{map-get($palette, light3)};
  }
}

* {
  margin: 0;
  padding: 0;
  font-family: sans-serif;
  font-weight: 400;
}

.palettes-container {
  display: flex;
  flex-direction: column;
  gap: 32px;
  padding: 16px;
  
  .palette {
    display: flex;
    flex-direction: column;
    gap: 8px;
    
    &__title {
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 4px;
      font-size: 12px;
    }
    
    &__labels {
      display: flex;
      gap: 8px;
      
      p {
        font-weight: 700;
      }
    }
      
    &.no-gap {
      gap: 0;
      
      .swatch {
        box-shadow: none;
      }
    }
  }

  .group {
    display: flex;
    gap: 16px;

    .swatch {
      width: 200px;
      height: 200px;
      border-radius: 16px;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      color: white;
      font-size: 12px;
      font-family: sans-serif;
      box-shadow: 0 0 1rem 0 rgba(0,0,0,0.25);

      &--base { background: var(--base); }
      &--l1   { background: var(--l1); }
      &--l2   { background: var(--l2); }
      &--l3   { background: var(--l3); }

      &--Bbase { background: #2153F9; }
      &--Bl1   { background: #B6C7FF; }
      &--Bl2   { background: #D9E8FE; }
      &--Bl3   { background: #E9F0FB; }
    }
  }
}
