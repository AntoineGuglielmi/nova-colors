@function generate-lights(
  $base,
  $temp-opposite: 4deg,   // bond thermique contraire en l1
  $temp-return: 10deg,     // retour ++ en l2
  $temp-cold-push: 0deg,  // refroidissement final en l3
  $max-lightness: 96.5%     // évite le blanc
) {
  $h: hue($base);
  $s: saturation($base);
  $l: lightness($base);

  // ----- 1. Détection chaud / froid -----
  $is-warm: ($h < 110deg) or ($h > 290deg);

  $sign-base: if($is-warm, 1, -1); // sens thermique naturel
  $sign-opposite: -$sign-base;

  // ----- 2. Répartition automatique de la luminosité -----
  // Plus la base est sombre, plus les pas sont grands
  $spread: (100% - $l) / 100%;

  $light-step-1: $spread * 70%;
  $light-step-2: $spread * 13%;
  $light-step-3: $spread * 20%;

  // ----- 3. LIGHT 1 -----
  $l1-h: $h + ($sign-opposite * $temp-opposite);
  $l1-l: $l + $light-step-1;
  $light1: hsl($l1-h, $s, $l1-l);

  // ----- 4. LIGHT 2 -----
  $l2-h: $h + ($sign-base * $temp-return);
  $l2-l: $l1-l + $light-step-2;
  $light2: hsl($l2-h, $s, $l2-l);

  // ----- 5. LIGHT 3 -----
  // Encore plus froide + plus claire sans blanchir
  $l3-h: $l2-h - ($sign-base * $temp-cold-push);
  $l3-l: min($l2-l + $light-step-3, $max-lightness);
  $light3: hsl($l3-h, $s, $l3-l);

  @return (
    base: $base,
    light1: $light1,
    light2: $light2,
    light3: $light3
  );
}

$colors: (
  bleu-base: #2153F9,
  bleu-base-fonce: #223D99,
  bleu-base-clair: #92AAF8,
  menthe: #A3F9C1,
  bleu-roi: #4B72E9,
  corail: #E85F3C,
  lagon: #19C7D4,
  safran: #F2B84A,
  indigo: #6D3FE0,
  pistache: #91E26B,
  framboise: #D43A7F,
  foret: #2F8A4C,
  citron-vert: #C9E134,
  pervenche: #7A5DF2,
  rose-fluo: #F45B92,
  azur: #3DB1E7,
  miel: #E1A24F,
  tilleul: #5C9A32,
  mauve: #B84FE2,
  jade: #28D6A1,
  mandarine: #F06C21,
  violet-electrique: #9B3FDD,
  menthe-claire: #74E592,
  turquoise: #2AC6B9,
  brique: #C14A32
);

/* générer les custom properties pour chaque palette */
@each $name, $color in $colors {
  $palette: generate-lights($color);

  .palette--#{$name} {
    --base: #{map-get($palette, base)};
    --l1: #{map-get($palette, light1)};
    --l2: #{map-get($palette, light2)};
    --l3: #{map-get($palette, light3)};
  }
}

* {
  margin: 0;
  padding: 0;
  font-family: sans-serif;
  font-weight: 400;
}

.palettes-container {
  display: flex;
  flex-direction: column;
  gap: 32px;
  padding: 16px;
  
  .palette {
    display: flex;
    flex-direction: column;
    gap: 8px;
    
    .palette__title {
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 4px;
      font-size: 12px;
    }
  }

  .group {
    display: flex;
    gap: 16px;

    .swatch {
      width: 100px;
      height: 100px;
      border-radius: 16px;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      color: white;
      font-size: 12px;
      font-family: sans-serif;
      box-shadow: 0 0 1rem 0 rgba(0,0,0,0.25);

      &--base { background: var(--base); }
      &--l1   { background: var(--l1); }
      &--l2   { background: var(--l2); }
      &--l3   { background: var(--l3); }
    }
  }
}
